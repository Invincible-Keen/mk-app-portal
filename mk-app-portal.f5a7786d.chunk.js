webpackJsonp([0],{1556:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,u,o=n(2),i=r(o),c=n(57),f=r(c),s=n(4),d=r(s),p=n(8),l=r(p),m=n(6),h=r(m),g=n(7),v=r(g),k=n(0),b=(r(k),n(276)),y=n(618),w=r(y),_=(a=(0,b.wrapper)(w.default))(u=function(e){function t(){return(0,d.default)(this,t),(0,h.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,i.default)({},this.props,{path:"root"}))}}]),t}(k.Component))||u;t.default=_,e.exports=t.default},1557:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new k.action(e),n=new _((0,o.default)({},e,{metaAction:t})),r=(0,o.default)({},t,n);return t.config({metaHandlers:r}),r}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),o=r(u),i=n(277),c=r(i),f=n(610),s=r(f),d=n(611),p=r(d),l=n(4),m=r(l);t.default=a;var h=n(0),g=r(h),v=n(278),k=n(276),b=n(80),y=n(609),w=r(y),_=function e(t){var r=this;(0,m.default)(this,e),this.onInit=function(e){var t=e.component,n=e.injections;r.component=t,r.injections=n,n.reduce("init"),r.load()},this.load=(0,p.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.config.apps["mk-app-login"]){e.next=5;break}return t={id:1,mobile:"13334445556",nickname:"齐天大圣"},r.metaAction.context.set("currentUser",t),r.metaAction.sf("data.other.currentUser",(0,b.fromJS)(t)),e.abrupt("return");case 5:return e.next=7,r.webapi.portal.init();case 7:n=e.sent,n.user?(r.metaAction.context.set("currentUser",n.user),r.metaAction.sf("data.other.currentUser",(0,b.fromJS)(n.user))):(r.metaAction.context.set("currentUser",void 0),r.component.props.onRedirect&&r.config.goAfterLogout&&r.component.props.onRedirect(r.config.goAfterLogout));case 9:case"end":return e.stop()}},e,r)})),this.getLogo=function(){return r.config.logo},this.getPhoto=function(){return n(1559)},this.getCurrentUser=function(){return r.metaAction.context.get("currentUser")||{}},this.getMenuChildren=function(){var e=r.metaAction.gf("data.menu").toJS();return function e(t){var n=[];return t.forEach(function(t){t.children?n.push(g.default.createElement(v.Menu.SubMenu,{key:t.key,title:t.name},e(t.children))):n.push(g.default.createElement(v.Menu.Item,{key:t.key},t.name))}),n}(e)},this.topMenuClick=function(){var e=(0,p.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.key,e.next="logout"===e.t0?3:"github"===e.t0?9:"gitter"===e.t0?11:"mySetting"===e.t0?13:15;break;case 3:if(!r.component.props.onRedirect||!r.config.goAfterLogout){e.next=8;break}return e.next=6,r.webapi.user.logout();case 6:r.metaAction.context.set("currentUser",void 0),r.component.props.onRedirect(r.config.goAfterLogout);case 8:return e.abrupt("break",15);case 9:return window.open("https://www.github.com/ziaochina/mk-app-portal"),e.abrupt("break",15);case 11:return window.open("https://gitter.im/mk-js/mk-js?utm_source=share-link&utm_medium=link&utm_campaign=share-link"),e.abrupt("break",15);case 13:return r.injections.reduce("setContent","mk-app-my-setting",{}),e.abrupt("break",15);case 15:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),this.menuClick=function(e){var t=r.metaAction.gf("data.menu").toJS(),n=function t(n){var r=!0,a=!1,u=void 0;try{for(var o,i=(0,c.default)(n);!(r=(o=i.next()).done);r=!0){var f=o.value;if(f.key==e.key)return f;if(f.children){var s=t(f.children);if(s)return s}}}catch(e){a=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw u}}}(t);n&&r.injections.reduce("setContent",n.appName,n.appParams)},this.metaAction=t.metaAction,this.config=w.default.current,this.webapi=this.config.webapi};e.exports=t.default},1558:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=new s.reducer(e),n=new m((0,o.default)({},e,{metaReducer:t}));return(0,o.default)({},t,n)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),o=r(u),i=n(4),c=r(i);t.default=a;var f=n(80),s=n(276),d=n(609),p=r(d),l=n(619),m=function e(t){var n=this;(0,c.default)(this,e),this.init=function(e,t){return e=n.metaReducer.init(e,(0,l.getInitState)()),n.config.menu&&!n.config.webapi.getMenu?n.load(e,{menu:n.config.menu}):e},this.load=function(e,t){var r=t.menu;if(!r||0==r.lenght)return e;var a,u,o=[];!function e(t){var n=[];return t.forEach(function(t){t.children?(t.isExpand&&o.push(t),e(t.children)):(u||(u=t),t.isDefault&&(a=t))}),n}(r),a=a||u;var i=(0,f.fromJS)(a?[a.key]:[]),c=(0,f.fromJS)(o.map(function(e){return e.key})),s=(0,f.fromJS)(a||{});return e=n.metaReducer.sf(e,"data.menu",(0,f.fromJS)(r)),e=n.metaReducer.sf(e,"data.menuDefaultSelectedKeys",i),e=n.metaReducer.sf(e,"data.menuDefaultOpenKeys",c),e=n.metaReducer.sf(e,"data.content",s)},this.setContent=function(e,t,r){return e=n.metaReducer.sf(e,"data.content.appName",t),e=n.metaReducer.sf(e,"data.content.appParams",r)},this.metaReducer=t.metaReducer,this.config=p.default.current};e.exports=t.default},1559:function(e,t,n){e.exports=n.p+"photo.e9543ac4.png"}});